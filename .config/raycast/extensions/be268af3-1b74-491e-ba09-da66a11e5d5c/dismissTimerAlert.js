"use strict";var m=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var S=Object.prototype.hasOwnProperty;var y=(e,t)=>{for(var n in t)m(e,n,{get:t[n],enumerable:!0})},w=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of T(t))!S.call(e,i)&&i!==n&&m(e,i,{get:()=>t[i],enumerable:!(r=h(t,i))||r.enumerable});return e};var M=e=>w(m({},"__esModule",{value:!0}),e);var O={};y(O,{default:()=>P});module.exports=M(O);var s=require("@raycast/api");var a=require("@raycast/api");var o=require("fs"),d=require("path");var l=e=>(e.d1=e.d1=="----"?void 0:e.d1,e.d2=e.d2=="----"?void 0:e.d2,Math.round((e.d1?new Date(e.d1):new Date).getTime()-(e.d2?new Date(e.d2):new Date).getTime())/1e3);var u=require("@raycast/api");var J=a.environment.supportPath+"/customTimers.json",B=a.environment.supportPath+"/defaultPresetVisibles.json",f=e=>{try{(0,o.unlinkSync)(e)}catch(t){if(t instanceof Error&&!t.message.includes("ENOENT"))throw t}};function p(e){let t=a.environment.supportPath+"/"+e,n=t.replace(".timer",".dismiss");f(t),f(n)}function g(){let e=[];return(0,o.readdirSync)(a.environment.supportPath).forEach(n=>{if((0,d.extname)(n)==".timer"){let r={name:"",secondsSet:-99,timeLeft:-99,originalFile:n,timeEnds:new Date};r.name=(0,o.readFileSync)(a.environment.supportPath+"/"+n).toString();let i=n.split("---");r.secondsSet=Number(i[1].split(".")[0]);let c=i[0].replace(/__/g,":");r.timeLeft=Math.max(0,Math.round(r.secondsSet-l({d2:c}))),r.timeEnds=new Date(c),r.timeEnds.setSeconds(r.timeEnds.getSeconds()+r.secondsSet),e.push(r)}}),e.sort((n,r)=>n.timeLeft-r.timeLeft),e}var P=async()=>{if(!(0,s.getPreferenceValues)().ringContinuously)return await(0,s.showToast)({style:s.Toast.Style.Failure,title:"Ring Continuously setting not enabled!"});let e=g().filter(t=>t.timeLeft===0);if(e.length===0)return await(0,s.showToast)({style:s.Toast.Style.Failure,title:"No finished timers found!"});await(0,s.closeMainWindow)(),p(e[0].originalFile)};
